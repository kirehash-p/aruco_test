# ArUco マーカーオーバーレイアプリケーション

このアプリケーションは、OpenCV.jsを使用してArUcoマーカーを検出し、マーカーの位置に画像を重ねて表示するWebアプリケーションです。カメラを使用して、現実空間に配置されたマーカーを認識し、その上に仮想的な画像を重ねる拡張現実（AR）体験を提供します。

## 使い方

1. アプリを起動すると、ブラウザがカメラへのアクセス許可を求めます。「許可」をクリックしてください。
2. カメラが起動し、画面にカメラからの映像が表示されます。
3. ArUcoマーカー（ID: 0, 1, 2, 3）を画面に表示すると、マーカーが検出され、その上に選択された画像が重ねて表示されます。
4. 画面左下の操作パネルから以下の設定が可能です：
   - **合成画像**: デフォルト画像またはアップロードした画像から選択できます。
   - **マーカー枠を表示**: チェックボックスをオン/オフすることで、検出されたマーカーの枠と ID の表示/非表示を切り替えられます。
   - **画像をアップロード**: お好みの画像をアップロードして、マーカー上に表示することができます。

## マーカーについて

このアプリケーションは、ArUcoマーカー（4x4, Dict 50）を使用しています。正しく動作させるためには、以下の4つのマーカーが必要です：

- ID 0: 左上に配置
- ID 1: 右上に配置
- ID 2: 右下に配置
- ID 3: 左下に配置

これら4つのマーカーが検出されると、その間の領域に選択された画像が透視変換されて表示されます。

### サンプルマーカー

`assets/arucosample.png` にサンプルマーカーが含まれています。このファイルには、必要な4つのマーカー（ID 0〜3）が適切に配置されています。印刷してお使いください。

## システム要件

- モダンなWebブラウザ（Google Chrome, Firefox, Safari, Microsoft Edge最新版推奨）
- カメラ付きデバイス（ノートPC、スマートフォン、タブレットなど）
- JavaScript有効設定

## トラブルシューティング

- **カメラが起動しない**: ブラウザがカメラへのアクセスを許可しているか確認してください。
- **マーカーが検出されない**: 
  - マーカーの印刷が鮮明かつ十分な大きさであることを確認してください
  - 照明条件を改善し、マーカーに明るい光が当たるようにしてください
  - マーカーが画面内に収まっていることを確認してください
- **画像の表示が不安定**: マーカーをしっかりと固定し、手振れを最小限に抑えてください

## 技術情報

- このアプリケーションはOpenCV.js（JavaScriptで動作するOpenCVライブラリ）を使用しています
- ArUcoマーカー検出アルゴリズムを利用し、マーカーの位置を特定しています
- 透視変換を適用して、検出されたマーカー平面上に画像を重ねて表示します
